[2025-10-11T20:28:29.641Z] Initializing PGLite with Storage: File (C:\Users\tdesa\Documents\ai_projects\openrouter-agents\researchAgentDB)
[2025-10-11T20:28:30.860Z] In-memory cache initialized with TTL: 3600s, max keys: 100
[2025-10-11T20:28:30.875Z] Initializing PGLite with Storage: File (C:\Users\tdesa\Documents\ai_projects\openrouter-agents\researchAgentDB)
[2025-10-11T20:28:30.875Z] Waiting 500ms before retrying DB initialization (last attempt 0ms ago)
(node:31632) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
{"result":{"protocolVersion":"2025-03-26","capabilities":{"prompts":{"listChanged":true},"completions":{},"resources":{"listChanged":true},"tools":{"listChanged":true}},"serverInfo":{"name":"openrouter_agents","version":"2.1.1-beta","capabilities":{"tools":{"list":true,"call":true},"prompts":{"list":true,"get":true,"listChanged":true},"resources":{"list":true,"read":true,"subscribe":true,"listChanged":true}}}},"jsonrpc":"2.0","id":1}
{"result":{"tools":[{"name":"ping","description":"Health check. Returns pong, optionally with server info.","inputSchema":{"type":"object","properties":{}},"annotations":{"x-schema-json":{"$ref":"#/definitions/1760214510866Params","definitions":{"1760214510866Params":{"type":"object","properties":{"info":{"type":"boolean","default":false}},"additionalProperties":false,"description":"Lightweight health check. Returns pong with server time; info=true adds DB/embedder/job counts."}},"$schema":"http://json-schema.org/draft-07/schema#"}}},{"name":"agent","description":"Single entrypoint agent. Routes to research, follow-up, or retrieve/query actions.","inputSchema":{"type":"object","properties":{}},"annotations":{"x-schema-json":{"$ref":"#/definitions/1760214510867Params","definitions":{"1760214510867Params":{"type":"object","properties":{"action":{"type":"string","enum":["auto","research","follow_up","retrieve","query"],"default":"auto"},"async":{"type":"boolean","default":true},"notify":{"type":"string","format":"uri"},"query":{"type":"string"},"costPreference":{"type":"string","enum":["high","low"],"default":"low"},"audienceLevel":{"type":"string","enum":["beginner","intermediate","expert"],"default":"intermediate"},"outputFormat":{"type":"string","enum":["report","briefing","bullet_points"],"default":"report"},"includeSources":{"type":"boolean","default":true},"images":{"type":"array","items":{"type":"object","properties":{"url":{"anyOf":[{"type":"string","format":"uri"},{"type":"string","pattern":"^data\\:image\\/"}]},"detail":{"type":"string","enum":["low","high","auto"],"default":"auto"}},"required":["url"],"additionalProperties":false},"description":"Optional array of images (URLs or base64 data URIs) relevant to the query."},"textDocuments":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","description":"Filename or identifier for the text document."},"content":{"type":"string","description":"Text content of the document."}},"required":["name","content"],"additionalProperties":false},"description":"Optional array of text documents relevant to the query."},"structuredData":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","description":"Identifier for the structured data (e.g., filename)."},"type":{"type":"string","enum":["csv","json"],"description":"Type of structured data ('csv' or 'json')."},"content":{"type":"string","description":"String content of the structured data (e.g., CSV text or JSON string)."}},"required":["name","type","content"],"additionalProperties":false},"description":"Optional array of structured data inputs relevant to the query."},"originalQuery":{"type":"string"},"followUpQuestion":{"type":"string"},"mode":{"type":"string","enum":["index","sql"]},"k":{"type":"integer","exclusiveMinimum":0},"scope":{"type":"string","enum":["both","reports","docs"]},"rerank":{"type":"boolean"},"sql":{"type":"string"},"params":{"type":"array"},"explain":{"type":"boolean"},"_requestId":{"type":"string"}},"additionalProperties":false,"description":"Single entrypoint agent tool. Routes to research, follow_up, or retrieve/query based on params. Set action to control explicitly or use action='auto'."}},"$schema":"http://json-schema.org/draft-07/schema#"}}},{"name":"job_status","description":"Check async job progress with summary, events, or full detail.","inputSchema":{"type":"object","properties":{}},"annotations":{"x-schema-json":{"$ref":"#/definitions/1760214510872Params","definitions":{"1760214510872Params":{"type":"object","properties":{"job_id":{"type":"string"},"since_event_id":{"type":"integer"},"format":{"type":"string","enum":["summary","full","events"],"default":"summary"},"max_events":{"type":"integer","exclusiveMinimum":0,"default":50}},"required":["job_id"],"additionalProperties":false,"description":"Get job status with a compact summary by default. Use format: 'full' to include full status + events or 'events' to return only events."}},"$schema":"http://json-schema.org/draft-07/schema#"}}},{"name":"get_job_status","description":"Alias for job_status with identical semantics.","inputSchema":{"type":"object","properties":{}},"annotations":{"x-schema-json":{"$ref":"#/definitions/1760214510872Params","definitions":{"1760214510872Params":{"type":"object","properties":{"job_id":{"type":"string"},"since_event_id":{"type":"integer"},"format":{"type":"string","enum":["summary","full","events"],"default":"summary"},"max_events":{"type":"integer","exclusiveMinimum":0,"default":50}},"required":["job_id"],"additionalProperties":false,"description":"Get job status with a compact summary by default. Use format: 'full' to include full status + events or 'events' to return only events."}},"$schema":"http://json-schema.org/draft-07/schema#"}}},{"name":"cancel_job","description":"Request cancellation of a queued or running job.","inputSchema":{"type":"object","properties":{}},"annotations":{"x-schema-json":{"$ref":"#/definitions/1760214510873Params","definitions":{"1760214510873Params":{"type":"object","properties":{"job_id":{"type":"string"}},"required":["job_id"],"additionalProperties":false,"description":"Cancel a queued or running job (best-effort)."}},"$schema":"http://json-schema.org/draft-07/schema#"}}},{"name":"get_server_status","description":"Server health summary including DB/embedder/job queue status.","inputSchema":{"type":"object","properties":{}},"annotations":{"x-schema-json":{"$ref":"#/definitions/1760214510873Params","definitions":{"1760214510873Params":{"type":"object","properties":{"_requestId":{"type":"string","description":"Internal request ID for logging"}},"additionalProperties":false}},"$schema":"http://json-schema.org/draft-07/schema#"}}}]},"jsonrpc":"2.0","id":2}
[2025-10-11T20:28:31.076Z] Successfully imported @xenova/transformers.
[2025-10-11T20:28:31.076Z] Initializing embedding model Xenova/all-MiniLM-L6-v2...
[2025-10-11T20:28:31.332Z] Embedding model initialized successfully.
[2025-10-11T20:28:33.666Z] PGLite vector extension enabled
[2025-10-11T20:28:33.674Z] PGLite reports table created or verified
[2025-10-11T20:28:33.700Z] BM25/vector index tables created or verified
[2025-10-11T20:28:33.709Z] Job tables created or verified
[2025-10-11T20:28:33.713Z] mcp_sessions table created or verified
[2025-10-11T20:28:33.717Z] usage_counters table created or verified
[2025-10-11T20:28:33.723Z] PGLite indexes created or verified
[2025-10-11T20:28:33.732Z] Initializing PGLite with Storage: File (C:\Users\tdesa\Documents\ai_projects\openrouter-agents\researchAgentDB)
[2025-10-11T20:28:35.031Z] PGLite vector extension enabled
[2025-10-11T20:28:35.040Z] PGLite reports table created or verified
[2025-10-11T20:28:35.072Z] BM25/vector index tables created or verified
[2025-10-11T20:28:35.087Z] Job tables created or verified
[2025-10-11T20:28:35.093Z] mcp_sessions table created or verified
[2025-10-11T20:28:35.098Z] usage_counters table created or verified
[2025-10-11T20:28:35.108Z] PGLite indexes created or verified
[2025-10-11T20:28:36.395Z] PGLite vector extension enabled
[2025-10-11T20:28:36.399Z] PGLite reports table created or verified
[2025-10-11T20:28:36.415Z] BM25/vector index tables created or verified
[2025-10-11T20:28:36.425Z] Job tables created or verified
[2025-10-11T20:28:36.428Z] mcp_sessions table created or verified
[2025-10-11T20:28:36.431Z] usage_counters table created or verified
[2025-10-11T20:28:36.434Z] PGLite indexes created or verified
