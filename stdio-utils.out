[2025-10-11T20:38:19.118Z] Initializing PGLite with Storage: File (C:\Users\tdesa\Documents\ai_projects\openrouter-agents\researchAgentDB)
[2025-10-11T20:38:20.330Z] In-memory cache initialized with TTL: 3600s, max keys: 100
[2025-10-11T20:38:20.351Z] Initializing PGLite with Storage: File (C:\Users\tdesa\Documents\ai_projects\openrouter-agents\researchAgentDB)
[2025-10-11T20:38:20.351Z] Waiting 499ms before retrying DB initialization (last attempt 1ms ago)
(node:19580) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
{"result":{"protocolVersion":"2025-03-26","capabilities":{"prompts":{"listChanged":true},"completions":{},"resources":{"listChanged":true},"tools":{"listChanged":true}},"serverInfo":{"name":"openrouter_agents","version":"2.1.1-beta","capabilities":{"tools":{"list":true,"call":true},"prompts":{"list":true,"get":true,"listChanged":true},"resources":{"list":true,"read":true,"subscribe":true,"listChanged":true}}}},"jsonrpc":"2.0","id":1}
{"result":{"tools":[{"name":"ping","description":"Health check. Returns pong, optionally with server info.","inputSchema":{"type":"object","properties":{}},"annotations":{"x-schema-json":{"$ref":"#/definitions/1760215100339Params","definitions":{"1760215100339Params":{"type":"object","properties":{"info":{"type":"boolean","default":false}},"additionalProperties":false,"description":"Lightweight health check. Returns pong with server time; info=true adds DB/embedder/job counts."}},"$schema":"http://json-schema.org/draft-07/schema#"}}},{"name":"agent","description":"Single entrypoint agent. Routes to research, follow-up, or retrieve/query actions.","inputSchema":{"type":"object","properties":{}},"annotations":{"x-schema-json":{"$ref":"#/definitions/1760215100341Params","definitions":{"1760215100341Params":{"type":"object","properties":{"action":{"type":"string","enum":["auto","research","follow_up","retrieve","query"],"default":"auto"},"async":{"type":"boolean","default":true},"notify":{"type":"string","format":"uri"},"query":{"type":"string"},"costPreference":{"type":"string","enum":["high","low"],"default":"low"},"audienceLevel":{"type":"string","enum":["beginner","intermediate","expert"],"default":"intermediate"},"outputFormat":{"type":"string","enum":["report","briefing","bullet_points"],"default":"report"},"includeSources":{"type":"boolean","default":true},"images":{"type":"array","items":{"type":"object","properties":{"url":{"anyOf":[{"type":"string","format":"uri"},{"type":"string","pattern":"^data\\:image\\/"}]},"detail":{"type":"string","enum":["low","high","auto"],"default":"auto"}},"required":["url"],"additionalProperties":false},"description":"Optional array of images (URLs or base64 data URIs) relevant to the query."},"textDocuments":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","description":"Filename or identifier for the text document."},"content":{"type":"string","description":"Text content of the document."}},"required":["name","content"],"additionalProperties":false},"description":"Optional array of text documents relevant to the query."},"structuredData":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","description":"Identifier for the structured data (e.g., filename)."},"type":{"type":"string","enum":["csv","json"],"description":"Type of structured data ('csv' or 'json')."},"content":{"type":"string","description":"String content of the structured data (e.g., CSV text or JSON string)."}},"required":["name","type","content"],"additionalProperties":false},"description":"Optional array of structured data inputs relevant to the query."},"originalQuery":{"type":"string"},"followUpQuestion":{"type":"string"},"mode":{"type":"string","enum":["index","sql"]},"k":{"type":"integer","exclusiveMinimum":0},"scope":{"type":"string","enum":["both","reports","docs"]},"rerank":{"type":"boolean"},"sql":{"type":"string"},"params":{"type":"array"},"explain":{"type":"boolean"},"_requestId":{"type":"string"}},"additionalProperties":false,"description":"Single entrypoint agent tool. Routes to research, follow_up, or retrieve/query based on params. Set action to control explicitly or use action='auto'."}},"$schema":"http://json-schema.org/draft-07/schema#"}}},{"name":"job_status","description":"Check async job progress with summary, events, or full detail.","inputSchema":{"type":"object","properties":{}},"annotations":{"x-schema-json":{"$ref":"#/definitions/1760215100347Params","definitions":{"1760215100347Params":{"type":"object","properties":{"job_id":{"type":"string"},"since_event_id":{"type":"integer"},"format":{"type":"string","enum":["summary","full","events"],"default":"summary"},"max_events":{"type":"integer","exclusiveMinimum":0,"default":50}},"required":["job_id"],"additionalProperties":false,"description":"Get job status with a compact summary by default. Use format: 'full' to include full status + events or 'events' to return only events."}},"$schema":"http://json-schema.org/draft-07/schema#"}}},{"name":"get_job_status","description":"Alias for job_status with identical semantics.","inputSchema":{"type":"object","properties":{}},"annotations":{"x-schema-json":{"$ref":"#/definitions/1760215100348Params","definitions":{"1760215100348Params":{"type":"object","properties":{"job_id":{"type":"string"},"since_event_id":{"type":"integer"},"format":{"type":"string","enum":["summary","full","events"],"default":"summary"},"max_events":{"type":"integer","exclusiveMinimum":0,"default":50}},"required":["job_id"],"additionalProperties":false,"description":"Get job status with a compact summary by default. Use format: 'full' to include full status + events or 'events' to return only events."}},"$schema":"http://json-schema.org/draft-07/schema#"}}},{"name":"cancel_job","description":"Request cancellation of a queued or running job.","inputSchema":{"type":"object","properties":{}},"annotations":{"x-schema-json":{"$ref":"#/definitions/1760215100348Params","definitions":{"1760215100348Params":{"type":"object","properties":{"job_id":{"type":"string"}},"required":["job_id"],"additionalProperties":false,"description":"Cancel a queued or running job (best-effort)."}},"$schema":"http://json-schema.org/draft-07/schema#"}}},{"name":"get_server_status","description":"Server health summary including DB/embedder/job queue status.","inputSchema":{"type":"object","properties":{}},"annotations":{"x-schema-json":{"$ref":"#/definitions/1760215100348Params","definitions":{"1760215100348Params":{"type":"object","properties":{"_requestId":{"type":"string","description":"Internal request ID for logging"}},"additionalProperties":false}},"$schema":"http://json-schema.org/draft-07/schema#"}}}]},"jsonrpc":"2.0","id":2}
{"jsonrpc":"2.0","id":3,"error":{"code":-32602,"message":"MCP error -32602: Tool date_time not found"}}
{"jsonrpc":"2.0","id":4,"error":{"code":-32602,"message":"MCP error -32602: Tool calc not found"}}
[2025-10-11T20:38:20.382Z] [req-1760215100382] get_server_status: Retrieving server status...
[2025-10-11T20:38:20.382Z] Waiting 468ms before retrying DB initialization (last attempt 32ms ago)
[2025-10-11T20:38:20.599Z] Successfully imported @xenova/transformers.
[2025-10-11T20:38:20.599Z] Initializing embedding model Xenova/all-MiniLM-L6-v2...
[2025-10-11T20:38:20.945Z] Embedding model initialized successfully.
[2025-10-11T20:38:20.946Z] Initializing PGLite with Storage: File (C:\Users\tdesa\Documents\ai_projects\openrouter-agents\researchAgentDB)
[2025-10-11T20:38:20.947Z] Initializing PGLite with Storage: File (C:\Users\tdesa\Documents\ai_projects\openrouter-agents\researchAgentDB)
[2025-10-11T20:38:22.809Z] PGLite vector extension enabled
[2025-10-11T20:38:22.822Z] PGLite reports table created or verified
[2025-10-11T20:38:22.854Z] BM25/vector index tables created or verified
[2025-10-11T20:38:22.870Z] Job tables created or verified
[2025-10-11T20:38:22.875Z] mcp_sessions table created or verified
[2025-10-11T20:38:22.881Z] usage_counters table created or verified
[2025-10-11T20:38:22.889Z] PGLite indexes created or verified
[2025-10-11T20:38:24.464Z] PGLite vector extension enabled
[2025-10-11T20:38:24.470Z] PGLite reports table created or verified
[2025-10-11T20:38:24.486Z] BM25/vector index tables created or verified
[2025-10-11T20:38:24.495Z] Job tables created or verified
[2025-10-11T20:38:24.497Z] mcp_sessions table created or verified
[2025-10-11T20:38:24.500Z] usage_counters table created or verified
[2025-10-11T20:38:24.504Z] PGLite indexes created or verified
[2025-10-11T20:38:25.866Z] PGLite vector extension enabled
[2025-10-11T20:38:25.874Z] PGLite reports table created or verified
[2025-10-11T20:38:25.899Z] BM25/vector index tables created or verified
[2025-10-11T20:38:25.910Z] Job tables created or verified
[2025-10-11T20:38:25.913Z] mcp_sessions table created or verified
[2025-10-11T20:38:25.918Z] usage_counters table created or verified
[2025-10-11T20:38:25.925Z] PGLite indexes created or verified
[2025-10-11T20:38:25.929Z] executeQuery: Successfully executed query. Rows returned: 0
[2025-10-11T20:38:25.931Z] [req-1760215100382] get_server_status: Status retrieved successfully.
{"result":{"content":[{"type":"text","text":"{\n  \"serverName\": \"openrouter_agents\",\n  \"serverVersion\": \"2.1.1-beta\",\n  \"timestamp\": \"2025-10-11T20:38:25.931Z\",\n  \"database\": {\n    \"initialized\": false,\n    \"storageType\": \"File (C:\\\\Users\\\\tdesa\\\\Documents\\\\ai_projects\\\\openrouter-agents\\\\researchAgentDB)\",\n    \"vectorDimension\": 384,\n    \"maxRetries\": 3,\n    \"retryDelayBaseMs\": 200,\n    \"relaxedDurability\": true\n  },\n  \"jobs\": {\n    \"queued\": 0,\n    \"running\": 0,\n    \"succeeded\": 0,\n    \"failed\": 0,\n    \"canceled\": 0\n  },\n  \"embedder\": {\n    \"ready\": false,\n    \"model\": \"Not Loaded\"\n  },\n  \"cache\": {\n    \"ttlSeconds\": 3600,\n    \"maxKeys\": 100,\n    \"currentKeys\": 0,\n    \"stats\": {\n      \"hits\": 0,\n      \"misses\": 0,\n      \"keys\": 0,\n      \"ksize\": 0,\n      \"vsize\": 0\n    }\n  },\n  \"config\": {\n    \"serverPort\": \"3008\",\n    \"maxResearchIterations\": 2\n  }\n}"}],"structuredContent":{"serverName":"openrouter_agents","serverVersion":"2.1.1-beta","timestamp":"2025-10-11T20:38:25.931Z","database":{"initialized":false,"storageType":"File (C:\\Users\\tdesa\\Documents\\ai_projects\\openrouter-agents\\researchAgentDB)","vectorDimension":384,"maxRetries":3,"retryDelayBaseMs":200,"relaxedDurability":true},"jobs":{"queued":0,"running":0,"succeeded":0,"failed":0,"canceled":0},"embedder":{"ready":false,"model":"Not Loaded"},"cache":{"ttlSeconds":3600,"maxKeys":100,"currentKeys":0,"stats":{"hits":0,"misses":0,"keys":0,"ksize":0,"vsize":0}},"config":{"serverPort":"3008","maxResearchIterations":2}}},"jsonrpc":"2.0","id":5}
[2025-10-11T20:38:27.059Z] PGLite vector extension enabled
[2025-10-11T20:38:27.065Z] PGLite reports table created or verified
[2025-10-11T20:38:27.083Z] BM25/vector index tables created or verified
[2025-10-11T20:38:27.093Z] Job tables created or verified
[2025-10-11T20:38:27.096Z] mcp_sessions table created or verified
[2025-10-11T20:38:27.098Z] usage_counters table created or verified
[2025-10-11T20:38:27.104Z] PGLite indexes created or verified
